import{s as oe,i as j,r as Ka}from"./attributes.BMDjYIYG.js";import{C as aa,D as Ua,t as C,g as e,J as N,a as S,F as Ya,G as Za,c as t,H as _,f as F,I as A,s as i,r as a,L as ta,b as v,z as B,u as l,n as Qa,W as et,K as at,E as tt}from"./render.e71zp6dr.js";import{e as ve,i as Pe}from"./attributes.Bu9u21_b.js";import{s as We}from"./class.o1nnyBL4.js";import{s as st}from"./style.DIYQUsB1.js";import{b as rt}from"./input.T_F2MOpi.js";import{p as it,a as ot}from"./event-modifiers.BqlTOgs2.js";import{i as nt}from"./lifecycle.BWefaNsD.js";import{p as ct}from"./props.C-SnMakD.js";/* empty css                       */const lt="lucky",pt="Lucky Slots",dt=0,ut=1,mt=JSON.parse('[{"rewardId":1,"amount":1,"odds":3,"type":"entity","id":null,"picture":"thumbnails/jackpot.webp","isBigwin":true,"isSuperJackpot":true,"isFreeTry":false,"name":"Джекпот","description":"Главный приз","category":"jackpot","icon":"/cash/jackpot.webp"},{"rewardId":2,"amount":1,"odds":100000,"type":"entity","id":null,"picture":"thumbnails/freespin.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":true,"name":"Бесплатный прокрут","description":"Возможность крутить рулетку еще раз без оплаты","category":"free-spin","icon":"/etc/freespin.webp"},{"rewardId":3,"amount":1,"odds":32500,"type":"entity","id":"Star_Bronze","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Бронзовая звезда","description":"Валюта для улучшений","category":"star","icon":"/stars/star_bronze.webp"},{"rewardId":4,"amount":1,"odds":5200,"type":"entity","id":"Star_Silver","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Серебряная звезда","description":"Редкая валюта для улучшений","category":"star","icon":"/stars/star_silver.webp"},{"rewardId":5,"amount":1,"odds":2600,"type":"entity","id":"Star_Gold","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Золотая звезда","description":"Очень редкая валюта для улучшений","category":"star","icon":"/stars/star_gold.webp"},{"rewardId":6,"amount":1,"odds":16250,"type":"entity","id":"Material_Energy25","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"25 пропусков","description":"Энергия для прохождения уровней","category":"material","icon":"/materials/ticket_25.webp"},{"rewardId":7,"amount":15,"odds":28900,"type":"entity","id":"Material_LP100","picture":"thumbnails/material_lp100_x15.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Аптечка","description":"15 аптечек для лечения мутантов","category":"material","icon":"/med/normal_med.webp"},{"rewardId":8,"amount":10,"odds":4330,"type":"entity","id":"Material_LP1000","picture":"thumbnails/material_lp1000_x10.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Большая аптечка","description":"10 больших аптечек","category":"material","icon":"/med/big_med.webp"},{"rewardId":9,"amount":2,"odds":13000,"type":"entity","id":"Material_Muto50","picture":"thumbnails/material_muto50_x2.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Большая доза мутостерона","description":"2 большие дозы для улучшений","category":"material","icon":"/materials/big_muto.webp"},{"rewardId":10,"amount":5000,"odds":10,"type":"softcurrency","id":"5000sc","picture":"thumbnails/sc100.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"5000 монет","description":"Игровая валюта","category":"currency","icon":"/cash/softcurrency.webp"},{"rewardId":11,"amount":10000,"odds":110000,"type":"softcurrency","id":null,"picture":"thumbnails/sc500.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"10000 монет","description":"Игровая валюта","category":"currency","icon":"/cash/s10000.webp"},{"rewardId":12,"amount":20000,"odds":88000,"type":"softcurrency","id":null,"picture":"thumbnails/sc1000.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"20000 монет","description":"Игровая валюта","category":"currency","icon":"/cash/softcurrency.webp"},{"rewardId":13,"amount":50000,"odds":50000,"type":"softcurrency","id":null,"picture":"thumbnails/sc10000.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"50000 монет","description":"Игровая валюта","category":"currency","icon":"/cash/s50000.webp"},{"rewardId":14,"amount":100000,"odds":37154,"type":"softcurrency","id":null,"picture":"thumbnails/sc50000.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"100000 монет","description":"Крупная сумма игровой валюты","category":"currency","icon":"/cash/s100000.webp"},{"rewardId":15,"amount":500000,"odds":13000,"type":"softcurrency","id":null,"picture":"thumbnails/sc75000.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"500000 монет","description":"Очень крупная сумма игровой валюты","category":"currency","icon":"/cash/softcurrency.webp"},{"rewardId":16,"amount":1000000,"odds":4342,"type":"softcurrency","id":null,"picture":"thumbnails/sc100000.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"1000000 монет","description":"Огромная сумма игровой валюты","category":"currency","icon":"/cash/s1000000.webp"},{"rewardId":17,"amount":5000000,"odds":130,"type":"softcurrency","id":null,"picture":"thumbnails/sc1000000.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"5000000 монет","description":"Гигантская сумма игровой валюты","category":"currency","icon":"/cash/softcurrency.webp"},{"rewardId":18,"amount":1,"odds":6500,"type":"entity","id":"Material_Gacha_Token","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Жетон генератора","description":"Для крутки других автоматов","category":"token","icon":"/tokens/material_gacha_token.webp"},{"rewardId":19,"amount":1,"odds":0,"type":"entity","id":"Daily_Token","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Ежедневный жетон","description":"Не участвует в розыгрыше (шанс 0%)","category":"token","icon":"/tokens/daily_token.webp"},{"rewardId":20,"amount":10,"odds":91000,"type":"hardcurrency","id":null,"picture":"thumbnails/hc10.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"10 золота","description":"Премиум валюта","category":"currency","icon":"/cash/g10.webp"},{"rewardId":21,"amount":20,"odds":26000,"type":"hardcurrency","id":null,"picture":"thumbnails/hc20.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"20 золота","description":"Премиум валюта","category":"currency","icon":"/cash/g20.webp"},{"rewardId":22,"amount":40,"odds":2600,"type":"hardcurrency","id":null,"picture":"thumbnails/hc40.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"40 золота","description":"Премиум валюта","category":"currency","icon":"/cash/g40.webp"},{"rewardId":23,"amount":1,"odds":32500,"type":"entity","id":"Material_XP250","picture":"thumbnails/material_xp250.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Баночка опыта","description":"Опыт для прокачки мутантов","category":"material","icon":"/materials/mini_xp.webp"},{"rewardId":24,"amount":1,"odds":32500,"type":"entity","id":"Material_XP1000","picture":"thumbnails/material_xp1000.webp","isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Банка опыта","description":"Много опыта для прокачки мутантов","category":"material","icon":"/materials/big_xp.webp"},{"rewardId":25,"amount":1,"odds":130,"type":"entity","id":"Charm_Critical_7","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер критов (7 дней)","description":"Повышение шанса критического удара","category":"booster","icon":"/boosters/charm_critical_7.webp"},{"rewardId":26,"amount":1,"odds":130,"type":"entity","id":"Charm_Anticritical_7","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер щита (7 дней)","description":"Защита от критических ударов","category":"booster","icon":"/boosters/charm_anticritical_7.webp"},{"rewardId":27,"amount":1,"odds":130,"type":"entity","id":"Charm_Xpx2_7","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер опыта +100% (7 дней)","description":"Удвоение получаемого опыта","category":"booster","icon":"/boosters/charm_xpx2_7.webp"},{"rewardId":28,"amount":1,"odds":130,"type":"entity","id":"Charm_Xpx3_7","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер опыта +200% (7 дней)","description":"Утроение получаемого опыта","category":"booster","icon":"/boosters/charm_xpx3_7.webp"},{"rewardId":29,"amount":1,"odds":26000,"type":"entity","id":"Charm_Critical_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер критов (1 день)","description":"Повышение шанса критического удара","category":"booster","icon":"/boosters/charm_critical_1.webp"},{"rewardId":30,"amount":1,"odds":26000,"type":"entity","id":"Charm_Anticritical_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер щита (1 день)","description":"Защита от критических ударов","category":"booster","icon":"/boosters/charm_anticritical_1.webp"},{"rewardId":31,"amount":1,"odds":6500,"type":"entity","id":"Charm_Xpx2_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер опыта +100% (1 день)","description":"Удвоение получаемого опыта","category":"booster","icon":"/boosters/charm_xpx2_1.webp"},{"rewardId":32,"amount":1,"odds":3900,"type":"entity","id":"Charm_Xpx3_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер опыта +200% (1 день)","description":"Утроение получаемого опыта","category":"booster","icon":"/boosters/charm_xpx3_1.webp"},{"rewardId":33,"amount":1,"odds":2600,"type":"entity","id":"Charm_Regenx2_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер регенерации +100% (1 день)","description":"Удвоение скорости восстановления HP","category":"booster","icon":"/boosters/charm_regenx2_1.webp"},{"rewardId":34,"amount":1,"odds":2600,"type":"entity","id":"Charm_Regenx4_1","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Бустер регенерации +300% (1 день)","description":"Учетверение скорости восстановления HP","category":"booster","icon":"/boosters/charm_regenx4_1.webp"},{"rewardId":35,"amount":1,"odds":500,"type":"entity","id":"Specimen_DA_04","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Эскадрилья Носорог","description":"Мутант","category":"mutant","icon":"/textures_by_mutant/da_04/specimen_da_04_normal.webp"},{"rewardId":36,"amount":1,"odds":500,"type":"entity","id":"Specimen_AF_04","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Стремглав","description":"Мутант","category":"mutant","icon":"/textures_by_mutant/af_04/specimen_af_04_normal.webp"},{"rewardId":37,"amount":1,"odds":1300,"type":"entity","id":"Star_Platinum","picture":null,"isBigwin":true,"isSuperJackpot":false,"isFreeTry":false,"name":"Платиновая звезда","description":"Очень редкая валюта для улучшений","category":"star","icon":"/stars/star_platinum.webp"},{"rewardId":38,"amount":1000,"odds":200,"type":"hardcurrency","id":null,"picture":"thumbnails/jackpot_gold_x1000.webp","isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"1000 золота","description":"Огромное количество премиум валюты","category":"currency","icon":"/cash/g1000.webp"},{"rewardId":39,"amount":1,"odds":30,"type":"entity","id":"Specimen_CA_09","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Биг Босс","description":"Редкий мутант","category":"mutant","icon":"/textures_by_mutant/ca_09/specimen_ca_09_normal.webp"},{"rewardId":40,"amount":1,"odds":30,"type":"entity","id":"Specimen_AE_11","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Микс0-Лог (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/ae_11/specimen_ae_11_normal.webp"},{"rewardId":41,"amount":1,"odds":100,"type":"entity","id":"Specimen_BA_06","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Z-0 (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/ba_06/specimen_ba_06_normal.webp"},{"rewardId":42,"amount":1,"odds":100,"type":"entity","id":"Specimen_DD_07","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Шершеляшар (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/dd_07/specimen_dd_07_normal.webp"},{"rewardId":43,"amount":1,"odds":30,"type":"entity","id":"Specimen_FA_08","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Футбот (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/fa_08/specimen_fa_08_normal.webp"},{"rewardId":44,"amount":1,"odds":30,"type":"entity","id":"Specimen_CB_12","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Кранекен (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/cb_12/specimen_cb_12_normal.webp"},{"rewardId":45,"amount":1,"odds":30,"type":"entity","id":"Specimen_EC_09","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Щиткалибур (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/ec_09/specimen_ec_09_normal.webp"},{"rewardId":46,"amount":1,"odds":30,"type":"entity","id":"Specimen_DE_08","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Космопанды (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/de_08/specimen_de_08_normal.webp"},{"rewardId":47,"amount":1,"odds":30,"type":"entity","id":"Specimen_DA_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Соколиный Глаз (Золотой)","description":"Редкий мутант с золотым скином","category":"mutant","icon":"/textures_by_mutant/da_10/specimen_da_10_normal.webp"},{"rewardId":48,"amount":1,"odds":32000,"type":"entity","id":"orb_basic_xp_01_ephemeral_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера опыта I (10 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_xp_01.webp"},{"rewardId":49,"amount":1,"odds":16000,"type":"entity","id":"orb_basic_xp_02_ephemeral_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера опыта II (10 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_xp_02.webp"},{"rewardId":50,"amount":1,"odds":8000,"type":"entity","id":"orb_basic_xp_03_ephemeral_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера опыта III (10 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_xp_03.webp"},{"rewardId":51,"amount":1,"odds":4000,"type":"entity","id":"orb_basic_xp_04_ephemeral_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера опыта IV (10 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_xp_04.webp"},{"rewardId":52,"amount":1,"odds":2000,"type":"entity","id":"orb_basic_xp_05_ephemeral_10","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера опыта V (10 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_xp_05.webp"},{"rewardId":53,"amount":1,"odds":2000,"type":"entity","id":"orb_basic_attack_05_ephemeral_30","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера атаки V (30 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_attack_05.webp"},{"rewardId":54,"amount":1,"odds":2000,"type":"entity","id":"orb_basic_life_05_ephemeral_30","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера HP V (30 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_life_05.webp"},{"rewardId":55,"amount":1,"odds":2000,"type":"entity","id":"orb_basic_critical_05_ephemeral_30","picture":null,"isBigwin":false,"isSuperJackpot":false,"isFreeTry":false,"name":"Сфера крит. урона V (30 зарядов)","description":"Временная сфера","category":"orb","icon":"/orbs/basic/orb_basic_critical_05.webp"}]'),_t={id:lt,title:pt,cost:dt,tokenCost:ut,rewards:mt},sa={jackpot:{label:"Джекпоты",icon:"/cash/jackpot.webp"},"free-spin":{label:"Бесплатные прокруты",icon:"/etc/freespin.webp"},star:{label:"Звёзды",icon:"/stars/star_gold.webp"},material:{label:"Материалы",icon:"/materials/mini_xp.webp"},booster:{label:"Бустеры",icon:"/boosters/charm_xpx2_7.webp"},mutant:{label:"Мутанты",icon:"/mut_icons/icon_gacha.webp"},currency:{label:"Валюта",icon:"/cash/hardcurrency.webp"},token:{label:"Жетоны",icon:"/tokens/material_gacha_token.webp"},orb:{label:"Сферы",icon:"/orbs/basic/orb_basic_xp.webp"},special:{label:"Особые призы",icon:"/etc/icon_timer.webp"}},ge=_t;function ra(s=ge){return s.rewards.filter(n=>n.odds>0)}function vt(s=ge){return ra(s).reduce((n,d)=>n+d.odds,0)}function m(s){return s.toLocaleString("ru-RU")}function gt(s,n=ge){const d=vt(n),g=d>0?s.odds/d:0;return{...s,chance:g}}function bt(s,n){const{historySize:d=20}=n,g=ra(s);if(!g.length)throw new Error("Нет доступных наград для симуляции.");const I=[];let w=0;for(const y of g)w+=y.odds,I.push({reward:y,cumulative:w});const h=d>0?new Array(d):[];return{weightedRewards:I,totalWeight:w,rewardMap:new Map,categoryMap:new Map,totalGoldWon:0,totalSilverWon:0,totalTokenItems:0,freeSpins:0,historyBuffer:h,historySize:d,historyCount:0,lastHistoryIndex:-1,baseTimestamp:Date.now(),totalSpins:0}}function yt(s,n){const d=n()*s.totalWeight;for(const g of s.weightedRewards)if(d<=g.cumulative)return g.reward;return s.weightedRewards[s.weightedRewards.length-1].reward}function ft(s,n){let d=s.categoryMap.get(n);if(!d){const g=sa[n]??sa.special;d={category:n,label:g.label,icon:g.icon,count:0,totalAmount:0},s.categoryMap.set(n,d)}return d}function ia(s,n,d,g){if(s.historySize<=0)return;const I={type:g,reward:n,label:n.name,icon:n.icon,timestamp:s.baseTimestamp+d},w=d%s.historySize;s.historyBuffer[w]=I,s.lastHistoryIndex=w,s.historyCount<s.historySize&&(s.historyCount+=1)}function wt(s,n,d){let g=s.rewardMap.get(n.rewardId);g||(g={reward:n,label:n.name,count:0,totalAmount:0,icon:n.icon},s.rewardMap.set(n.rewardId,g)),g.count+=1,g.totalAmount+=n.amount;const I=ft(s,n.category);I.count+=1,I.totalAmount+=n.amount,n.type==="hardcurrency"?s.totalGoldWon+=n.amount:n.type==="softcurrency"&&(s.totalSilverWon+=n.amount),n.category==="token"&&(s.totalTokenItems+=n.amount),ia(s,n,d,"reward")}function ht(s,n,d){s.freeSpins+=1,ia(s,n,d,"free-spin")}function kt(s,n){const d=Array.from(s.rewardMap.values()).sort((h,y)=>y.count!==h.count?y.count-h.count:y.totalAmount-h.totalAmount),g=Array.from(s.categoryMap.values()).sort((h,y)=>y.count-h.count),I=[];for(let h=0;h<s.historyCount;h+=1){const y=(s.lastHistoryIndex-h+s.historySize)%s.historySize,c=s.historyBuffer[y];c&&I.push(c)}const w=s.totalSpins-s.freeSpins;return{requestedSpins:n,totalSpins:s.totalSpins,paidSpins:w,freeSpins:s.freeSpins,goldWon:s.totalGoldWon,silverWon:s.totalSilverWon,tokenItems:s.totalTokenItems,breakdown:d,categories:g,history:I}}async function St(s,n=ge,d={}){const{randomFn:g=Math.random,batchSize:I=2e3,onProgress:w,signal:h}=d,y=bt(n,d);let c=s,J=s,z=0,L=0;for(;c>0;){if(h?.aborted)throw new DOMException("Симуляция остановлена","AbortError");const H=Math.min(I,c);let ne=0;for(;ne<H;){c-=1,ne+=1;const q=yt(y,g);y.totalSpins+=1,J>0&&(J-=1,z+=1),q.isFreeTry?(c+=1,ht(y,q,L)):wt(y,q,L),L+=1}w?.(z,s),c>0&&await new Promise(q=>setTimeout(q))}return z<s&&w?.(s,s),kt(y,s)}var It=F('<div class="progress"><div class="progress-bar svelte-1s5ogca"><div class="progress-fill svelte-1s5ogca"></div></div> <div class="progress-label"> </div></div>'),Ft=F('<p class="error"> </p>'),xt=F('<button class="primary show-results-btn svelte-1s5ogca">Показать результаты</button>'),Tt=F('<article class="resource-card svelte-1s5ogca"><div class="resource-icon svelte-1s5ogca"><img alt="" class="svelte-1s5ogca"/></div> <div class="resource-body svelte-1s5ogca"><span class="resource-title svelte-1s5ogca"> </span> <strong class="svelte-1s5ogca"> </strong> <span class="resource-meta svelte-1s5ogca"> </span></div></article>'),Bt=F('<span class="currency svelte-1s5ogca"> </span>'),Jt=F('<span class="currency svelte-1s5ogca"> </span>'),Mt=F('<li><div class="icon svelte-1s5ogca"><img alt="" loading="lazy" class="svelte-1s5ogca"/></div> <div class="details svelte-1s5ogca"><div class="row svelte-1s5ogca"><span class="name svelte-1s5ogca"> </span> <span class="count-badge svelte-1s5ogca"> </span></div> <div class="pills svelte-1s5ogca"><span class="pill actual svelte-1s5ogca"> </span> <span class="pill expected svelte-1s5ogca"> </span></div> <!></div></li>'),Ct=F('<ul class="reward-board svelte-1s5ogca"></ul>'),At=F('<p class="muted">Награды пока не выпадали.</p>'),Lt=F('<span class="note svelte-1s5ogca">+1 спин</span>'),Rt=F('<span class="note svelte-1s5ogca"> </span>'),Pt=F('<li><div class="history-info svelte-1s5ogca"><img alt="" loading="lazy" class="svelte-1s5ogca"/> <span class="title"> </span></div> <!></li>'),Wt=F('<ul class="history-list svelte-1s5ogca"></ul>'),jt=F('<p class="muted">Запустите симуляцию, чтобы увидеть историю.</p>'),zt=F('<div class="modal-overlay svelte-1s5ogca" role="dialog" tabindex="-1"><div class="modal-content svelte-1s5ogca"><div class="modal-header svelte-1s5ogca"><h3 class="svelte-1s5ogca">Результаты симуляции</h3> <button class="modal-close svelte-1s5ogca">✕</button></div> <section class="stats svelte-1s5ogca"><div class="stat-card svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/etc/icon_timer.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Всего прокрутов</span><strong class="svelte-1s5ogca"> </strong></div></div> <div class="stat-card svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/tokens/material_jackpot_token.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Платных</span><strong class="svelte-1s5ogca"> </strong></div></div> <div class="stat-card highlight svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/etc/freespin.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Бесплатных</span> <strong class="svelte-1s5ogca"> </strong> <small> </small></div></div> <div class="stat-card svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/cash/g20.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Выиграно золота</span><strong class="svelte-1s5ogca"> </strong></div></div> <div class="stat-card svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/cash/softcurrency.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Выиграно серебра</span><strong class="svelte-1s5ogca"> </strong></div></div> <div class="stat-card svelte-1s5ogca"><img class="stat-icon svelte-1s5ogca" src="/tokens/material_gacha_token.webp" alt=""/> <div class="stat-body svelte-1s5ogca"><span class="label svelte-1s5ogca">Жетоны</span><strong class="svelte-1s5ogca"> </strong></div></div></section> <section class="resource-summary svelte-1s5ogca"></section> <div class="result-grid svelte-1s5ogca"><section class="result-column svelte-1s5ogca"><h4 class="svelte-1s5ogca">По наградам</h4> <!></section> <section class="result-column svelte-1s5ogca"><h4 class="svelte-1s5ogca">История последних выпадений</h4> <!></section></div> <button class="primary modal-close-bottom svelte-1s5ogca">Закрыть</button></div></div>'),Et=F('<li class="svelte-1s5ogca"><span class="odds-name svelte-1s5ogca"><img class="odds-icon svelte-1s5ogca" alt=""/><span class="name"> </span></span> <span class="chance svelte-1s5ogca"> </span></li>'),Dt=F('<div class="odds-scroll svelte-1s5ogca"><ul class="odds-list svelte-1s5ogca"></ul></div>'),$t=F('<div class="machine-shell svelte-1s5ogca"><div class="machine-body svelte-1s5ogca"><div class="machine-header svelte-1s5ogca"><span class="machine-tag svelte-1s5ogca">Lucky Slots</span> <h2 class="svelte-1s5ogca"> </h2> <p>Крутите слот-машину с реальными шансами. Бесплатные прокруты добавляются автоматически.</p></div> <form class="control-panel svelte-1s5ogca" style="order: -1;"><label class="input-group"><span>Количество платных прокрутов</span> <div class="input-wrapper svelte-1s5ogca"><input type="number" class="svelte-1s5ogca"/> <span class="suffix">спинов</span></div></label> <div class="actions svelte-1s5ogca"><button type="submit" class="primary svelte-1s5ogca"> </button> <button type="button" class="ghost svelte-1s5ogca"> </button></div> <!> <!></form> <!></div> <!> <aside><button class="odds-toggle svelte-1s5ogca"><h3>Шансы</h3> <span class="chevron svelte-1s5ogca"> </span></button> <!></aside></div>');function Zt(s,n){Za(n,!1);let d=ct(n,"machine",8);const g=d().rewards.filter(r=>r.odds>0).map(r=>gt(r,d())).sort((r,o)=>o.chance-r.chance);let I=A(!1),w=A(200),h=A(!1),y=A(null),c=A(null),J=A(0),z=A(0),L=A(null),H=A(!1);const ne={consumables:{label:"Расходники",icon:"/med/normal_med.webp",metaLabel:"Ресурсов суммарно"},stars:{label:"Звёзды",icon:"/stars/all_stars.webp",metaLabel:"Ресурсов суммарно"},spheres:{label:"Сферы",icon:"/orbs/basic/orb_slot.webp",metaLabel:"Ресурсов суммарно"},boosters:{label:"Бустеры",icon:"/boosters/charm_xpx2_7.webp",metaLabel:"Ресурсов суммарно"},tokens:{label:"Жетоны",icon:"/tokens/material_gacha_token.webp",metaLabel:"Ресурсов суммарно"},mutants:{label:"Мутанты",icon:"/etc/icon_larva.webp",metaLabel:"Выпало суммарно"},jackpots:{label:"Джекпоты",icon:"/cash/jackpot.webp",metaLabel:"Выпало суммарно"}},q=["consumables","stars","spheres","boosters","tokens","mutants","jackpots"],be=new Map;for(const r of g)be.set(r.rewardId,r.chance);function oa(r){const{reward:o}=r,p=o.name.toLowerCase(),f=o.id?.toLowerCase?.()??"";return o.isSuperJackpot||o.category==="jackpot"||p.includes("джекпот")?"jackpots":o.category==="mutant"||f.includes("specimen")||p.includes("мутант")?"mutants":o.category==="token"||p.includes("жетон")||f.includes("token")||f.includes("jackpot")?"tokens":o.category==="orb"||p.includes("сфер")||f.includes("orb")?"spheres":o.category==="booster"||p.includes("бустер")||f.includes("booster")?"boosters":o.category==="star"||p.includes("звёзд")||f.includes("star")?"stars":o.category==="material"||p.includes("апт")||p.includes("опыт")||f.includes("xp")||f.includes("med")?"consumables":null}function na(r){const o=new Map;if(r)for(const p of r.breakdown){const f=oa(p);if(!f)continue;const x=o.get(f)??{count:0,totalAmount:0};x.count+=p.count,x.totalAmount+=p.totalAmount,o.set(f,x)}return q.map(p=>{const f=ne[p],x=o.get(p)??{count:0,totalAmount:0};return{key:p,...f,...x}})}let ce=A([]),ca=A(0);function je(r,o=2){return`${(r*100).toFixed(o)}%`}function la(){e(L)&&e(L).abort(),_(c,null),_(J,0),_(z,0),_(y,null),_(H,!1)}function le(){_(H,!1)}async function pa(){if(_(y,null),!Number.isFinite(e(w))||e(w)<=0){_(y,"Введите положительное количество прокрутов.");return}_(c,null),_(J,0),_(z,0),_(h,!0),_(L,new AbortController),await Qa();try{const r=await St(e(w),d(),{historySize:24,batchSize:200,signal:e(L).signal,onProgress(o){_(z,o);const p=e(w)>0?o/e(w):0;_(J,p)}});_(J,1),_(c,r),_(H,!0)}catch(r){r instanceof DOMException&&r.name==="AbortError"||_(y,"Ошибка симуляции.")}finally{_(L,null),_(h,!1)}}function da(r){return!r||r.totalSpins===0?"—":`${(r.freeSpins/r.totalSpins*100).toFixed(2)}%`}function ua(r){return!r||r.freeSpins===0?"—":`1 к ${(r.paidSpins/r.freeSpins).toFixed(2)}`}function ma(r){return!e(c)||e(c).totalSpins<=0?"—":je(r.count/e(c).totalSpins,2)}function _a(r){const o=be.get(r.reward.rewardId);return o==null?"—":je(o,4)}function va(r){const{reward:o,totalAmount:p}=r;return o.type==="hardcurrency"?`${m(p)} × золото`:o.type==="softcurrency"?`${m(p)} × серебро`:o.category==="token"?`${m(p)} × жетоны джекпота`:"—"}aa(()=>e(c),()=>{_(ce,na(e(c)))}),aa(()=>e(ce),()=>{_(ca,e(ce).find(r=>r.key==="jackpots")?.count??0)}),Ua(),nt();var ye=$t(),fe=t(ye),we=t(fe),ze=i(t(we),2),ga=t(ze,!0);a(ze),ta(2),a(we);var pe=i(we,2),he=t(pe),Ee=i(t(he),2),ke=t(Ee);Ka(ke),oe(ke,"min",1),ta(2),a(Ee),a(he);var Se=i(he,2),de=t(Se),ba=t(de,!0);a(de);var Ie=i(de,2),ya=t(Ie,!0);a(Ie),a(Se);var De=i(Se,2);{var fa=r=>{var o=It(),p=t(o),f=t(p);a(p);var x=i(p,2),E=t(x);a(x),a(o),C((D,K,U,ae)=>{st(f,D),v(E,`Выполнено ${K??""}% — ${U??""} из ${ae??""}`)},[()=>(e(J),l(()=>`width: ${Math.min(e(J)*100,100)}%`)),()=>(e(J),l(()=>Math.min(Math.floor(e(J)*100),100))),()=>(B(m),e(z),l(()=>m(e(z)))),()=>(B(m),e(w),l(()=>m(e(w))))]),S(r,o)};j(De,r=>{e(h)&&r(fa)})}var wa=i(De,2);{var ha=r=>{var o=Ft(),p=t(o,!0);a(o),C(()=>v(p,e(y))),S(r,o)};j(wa,r=>{e(y)&&r(ha)})}a(pe);var ka=i(pe,2);{var Sa=r=>{var o=xt();N("click",o,()=>_(H,!0)),S(r,o)};j(ka,r=>{e(c)&&!e(H)&&r(Sa)})}a(fe);var $e=i(fe,2);{var Ia=r=>{var o=zt(),p=t(o),f=t(p),x=i(t(f),2);a(f);var E=i(f,2),D=t(E),K=i(t(D),2),U=i(t(K)),ae=t(U,!0);a(U),a(K),a(D);var Q=i(D,2),me=i(t(Q),2),_e=i(t(me)),Ba=t(_e,!0);a(_e),a(me),a(Q);var xe=i(Q,2),Oe=i(t(xe),2),Te=i(t(Oe),2),Ja=t(Te,!0);a(Te);var Ve=i(Te,2),Ma=t(Ve);a(Ve),a(Oe),a(xe);var Be=i(xe,2),Xe=i(t(Be),2),Ne=i(t(Xe)),Ca=t(Ne,!0);a(Ne),a(Xe),a(Be);var Je=i(Be,2),qe=i(t(Je),2),Ke=i(t(qe)),Aa=t(Ke,!0);a(Ke),a(qe),a(Je);var Ue=i(Je,2),Ye=i(t(Ue),2),Ze=i(t(Ye)),La=t(Ze,!0);a(Ze),a(Ye),a(Ue),a(E);var Me=i(E,2);ve(Me,5,()=>e(ce),k=>k.key,(k,b)=>{var $=Tt(),u=t($),R=t(u);a(u);var P=i(u,2),T=t(P),W=t(T,!0);a(T);var G=i(T,2),ee=t(G,!0);a(G);var O=i(G,2),Y=t(O);a(O),a(P),a($),C((te,M)=>{oe(R,"src",(e(b),l(()=>e(b).icon))),v(W,(e(b),l(()=>e(b).label))),v(ee,te),v(Y,`${e(b),l(()=>e(b).metaLabel)??""}: ${M??""}`)},[()=>(B(m),e(b),l(()=>m(e(b).count))),()=>(B(m),e(b),l(()=>m(e(b).totalAmount)))]),S(k,$)}),a(Me);var Ce=i(Me,2),Ae=t(Ce),Ra=i(t(Ae),2);{var Pa=k=>{var b=Ct();ve(b,5,()=>(e(c),l(()=>e(c).breakdown)),Pe,($,u,R)=>{const P=et(()=>(e(u),l(()=>va(e(u)))));var T=Mt();We(T,1,"svelte-1s5ogca",null,{},{"index-top":R<3});var W=t(T),G=t(W);a(W);var ee=i(W,2),O=t(ee),Y=t(O),te=t(Y,!0);a(Y);var M=i(Y,2),Z=t(M);a(M),a(O);var se=i(O,2),re=t(se),$a=t(re);a(re);var ea=i(re,2),Ha=t(ea);a(ea),a(se);var Ga=i(se,2);{var Oa=V=>{var X=Bt(),ie=t(X,!0);a(X),C(()=>v(ie,e(P))),S(V,X)},Va=V=>{var X=at(),ie=tt(X);{var Xa=Le=>{var Re=Jt(),Na=t(Re);a(Re),C(qa=>v(Na,`${qa??""} шт.`),[()=>(B(m),e(u),l(()=>m(e(u).totalAmount)))]),S(Le,Re)};j(ie,Le=>{e(u),l(()=>e(u).totalAmount>e(u).count)&&Le(Xa)},!0)}S(V,X)};j(Ga,V=>{e(P)!=="—"?V(Oa):V(Va,!1)})}a(ee),a(T),C((V,X,ie)=>{oe(G,"src",(e(u),l(()=>e(u).icon??"/etc/icon_larva.webp"))),v(te,(e(u),l(()=>e(u).label))),v(Z,`${V??""}×`),v($a,`Факт: ${X??""}`),v(Ha,`Теор: ${ie??""}`)},[()=>(B(m),e(u),l(()=>m(e(u).count))),()=>(e(u),l(()=>ma(e(u)))),()=>(e(u),l(()=>_a(e(u))))]),S($,T)}),a(b),S(k,b)},Wa=k=>{var b=At();S(k,b)};j(Ra,k=>{e(c),l(()=>e(c).breakdown.length)?k(Pa):k(Wa,!1)})}a(Ae);var Qe=i(Ae,2),ja=i(t(Qe),2);{var za=k=>{var b=Wt();ve(b,5,()=>(e(c),l(()=>e(c).history)),Pe,($,u)=>{var R=Pt();let P;var T=t(R),W=t(T),G=i(W,2),ee=t(G,!0);a(G),a(T);var O=i(T,2);{var Y=M=>{var Z=Lt();S(M,Z)},te=M=>{var Z=Rt(),se=t(Z);a(Z),C(re=>v(se,`${re??""}×`),[()=>(B(m),e(u),l(()=>m(e(u).reward.amount)))]),S(M,Z)};j(O,M=>{e(u),l(()=>e(u).type==="free-spin")?M(Y):M(te,!1)})}a(R),C(()=>{P=We(R,1,"svelte-1s5ogca",null,P,{"free-spin":e(u).type==="free-spin"}),oe(W,"src",(e(u),l(()=>e(u).icon??"/etc/icon_larva.webp"))),v(ee,(e(u),l(()=>e(u).label)))}),S($,R)}),a(b),S(k,b)},Ea=k=>{var b=jt();S(k,b)};j(ja,k=>{e(c),l(()=>e(c).history.length)?k(za):k(Ea,!1)})}a(Qe),a(Ce);var Da=i(Ce,2);a(p),a(o),C((k,b,$,u,R,P,T,W)=>{v(ae,k),v(Ba,b),v(Ja,$),v(Ma,`Доля: ${u??""} • ${R??""}`),v(Ca,P),v(Aa,T),v(La,W)},[()=>(B(m),e(c),l(()=>m(e(c).totalSpins))),()=>(B(m),e(c),l(()=>m(e(c).paidSpins))),()=>(B(m),e(c),l(()=>m(e(c).freeSpins))),()=>(e(c),l(()=>da(e(c)))),()=>(e(c),l(()=>ua(e(c)))),()=>(B(m),e(c),l(()=>m(e(c).goldWon))),()=>(B(m),e(c),l(()=>m(e(c).silverWon))),()=>(B(m),e(c),l(()=>m(e(c).tokenItems)))]),N("click",x,le),N("click",Da,le),N("click",o,ot(le)),N("keydown",o,k=>k.key==="Escape"&&le()),S(r,o)};j($e,r=>{e(c)&&e(H)&&r(Ia)})}var Fe=i($e,2);let He;var ue=t(Fe),Ge=i(t(ue),2),Fa=t(Ge,!0);a(Ge),a(ue);var xa=i(ue,2);{var Ta=r=>{var o=Dt(),p=t(o);ve(p,5,()=>g,Pe,(f,x)=>{var E=Et(),D=t(E),K=t(D),U=i(K),ae=t(U,!0);a(U),a(D);var Q=i(D,2),me=t(Q);a(Q),a(E),C(_e=>{oe(K,"src",(e(x),l(()=>e(x).icon))),v(ae,(e(x),l(()=>e(x).name))),v(me,`${_e??""}%`)},[()=>(e(x),l(()=>(e(x).chance*100).toFixed(4)))]),S(f,E)}),a(p),a(o),S(r,o)};j(xa,r=>{e(I)&&r(Ta)})}a(Fe),a(ye),C(()=>{v(ga,(B(d()),l(()=>d().title))),de.disabled=e(h),v(ba,e(h)?"Считаем…":"Запустить симуляцию"),v(ya,e(h)?"Остановить":"Очистить"),He=We(Fe,1,"odds-panel svelte-1s5ogca",null,He,{collapsed:!e(I)}),v(Fa,e(I)?"▼":"▲")}),rt(ke,()=>e(w),r=>_(w,r)),N("click",Ie,function(...r){(e(h)?()=>e(L)?.abort():la)?.apply(this,r)}),N("submit",pe,it(pa)),N("click",ue,()=>_(I,!e(I))),S(s,ye),Ya()}export{Zt as default};
