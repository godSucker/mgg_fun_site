---
import "@/styles/global.css";
import Analytics from '@vercel/analytics/astro';
import  SpeedInsights  from "@vercel/speed-insights/astro"
// Simple base layout for the site.
// It provides a consistent header, footer and sets a dark theme background.
const { title, fullWidth = false, viewport = "width=device-width, initial-scale=1" } = Astro.props;
const isHome = Astro.url.pathname === "/";
---

<!DOCTYPE html>
<html lang="ru">
  <head>
  <!-- –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
  <meta property="og:type" content="website" />

  <!-- –ó–ê–ì–û–õ–û–í–û–ö (—è –¥–æ–±–∞–≤–∏–ª —Ç–µ–∫—Å—Ç, –±–µ–∑ –Ω–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!) -->
  <meta property="og:title" content="–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π MGG —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º–∏ –∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞–º–∏ —Ä–∞–∑–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π" />

  <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
  <meta property="og:description" content="–í–æ–∑—Ä–æ–∂–¥–∞–µ–º MGG" />

  <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–º —Å–∞–π—Ç (–æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã) -->
  <meta property="og:url" content="https://www.archivist-library.com/" />

  <!-- –ö–∞—Ä—Ç–∏–Ω–∫–∞ -->
  <meta property="og:image" content="https://www.archivist-library.com/preview.jpg" />

  <!-- –¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –¢–≤–∏—Ç—Ç–µ—Ä–∞/X (–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥—Ä—É–≥–∏—Ö —Å–æ—Ü—Å–µ—Ç–µ–π) -->
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="preload" as="font" type="font/woff2" href="/fonts/tt-supermolot-neue/TTSupermolotNeue-Bold.woff2" crossorigin>
  <link rel="stylesheet" href="/fonts/tt-supermolot-neue/tt-supermolot-neue.css">
  <!-- –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ (–≥–æ–≤–æ—Ä–∏—Ç –±–æ—Ç–∞–º, —á—Ç–æ —ç—Ç–æ –≥–ª–∞–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã) -->
  <link rel="canonical" href="https://www.archivist-library.com/" />
  <!-- –ò–∫–æ–Ω–∫–∞ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
  <link rel="icon" type="image/png" href="/favicon.png" />
    <meta charset="utf-8" />
    <meta name="viewport" content={viewport} />
    <title>{title ?? 'Archivist-Library'}</title>
    <style>
      body {
        margin: 0;
        font-family: "TT Supermolot Neue", ui-sans-serif, system-ui, -apple-system,
                 "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
                 "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        font-weight: 700;
        font-style: normal;
        background-color: #0d1117;
        color: #c9d1d9;
        min-height: 100vh;
        position: relative;
        display: flex;
        flex-direction: column; /* –î–ª—è –ø—Ä–∏–±–∏—Ç–∏—è —Ñ—É—Ç–µ—Ä–∞ –∫ –Ω–∏–∑—É */
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('/main_page.webp');
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
        z-index: -1;
        opacity: 0.35;
        filter: saturate(1.4) brightness(0.5) contrast(1.1) blur(10px);
        transform: scale(1.05);
      }

      @supports not (background-image: url('data:image/webp;base64,')) {
        body::before {
          background-image: url('/main_page.jpg');
        }
      }

      @media (max-width: 767px) {
        body::before {
          background-size: cover;
          background-position: center center;
          background-repeat: no-repeat;
          background-attachment: fixed;
          opacity: 0.35;
        }
      }
      
      /* Header styles */
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 1rem;
        background-color: rgba(22, 27, 34, 0.8);
        backdrop-filter: blur(8px);
        border-bottom: 1px solid rgba(48, 54, 61, 0.5);
        position: sticky;
        top: -1px; /* Lift up by 1px to close the gap */
        z-index: 100;
      }
      
      header .logo a {
        color: #58a6ff;
        text-decoration: none;
        font-size: 1.25rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .global-back-button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 8px;
        background: rgba(88, 166, 255, 0.1);
        border: 1px solid rgba(88, 166, 255, 0.2);
        color: #58a6ff;
        text-decoration: none;
        transition: all 0.2s ease;
        margin-right: 0.5rem;
      }

      .global-back-button:hover {
        background: rgba(88, 166, 255, 0.2);
        transform: translateX(-2px);
      }
      
      /* Hamburger menu button */
      .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 4px;
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
      }
      
      .menu-toggle span {
        display: block;
        width: 24px;
        height: 3px;
        background-color: #c9d1d9;
        transition: all 0.3s ease;
        border-radius: 2px;
      }
      
      .menu-toggle.active span:nth-child(1) {
        transform: rotate(45deg) translate(6px, 6px);
      }
      
      .menu-toggle.active span:nth-child(2) {
        opacity: 0;
      }
      
      .menu-toggle.active span:nth-child(3) {
        transform: rotate(-45deg) translate(6px, -6px);
      }
      
      /* Desktop navigation */
      header nav {
        display: flex;
        gap: 1rem;
        align-items: center;
      }
      
      header nav a {
        color: #58a6ff;
        text-decoration: none;
        font-size: 0.9rem;
        white-space: nowrap;
        transition: all 0.2s;
        padding: 0.5rem 0.75rem;
        border-radius: 6px;
      }
      
      header nav a:hover {
        background-color: rgba(88, 166, 255, 0.1);
        color: #79c0ff;
      }

      /* Dropdown styles */
      .dropdown {
        position: relative;
        display: inline-block;
      }

      .dropdown-trigger {
        color: #58a6ff;
        text-decoration: none;
        font-size: 0.9rem;
        white-space: nowrap;
        transition: all 0.2s;
        padding: 0.5rem 0.75rem;
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        background: none;
        border: none;
        font-family: inherit;
        font-weight: 700;
      }

      .dropdown:hover .dropdown-trigger {
        background-color: rgba(88, 166, 255, 0.1);
        color: #79c0ff;
      }

      .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(10px);
        background-color: rgba(22, 27, 34, 0.95);
        backdrop-filter: blur(12px);
        border: 1px solid #30363d;
        border-radius: 12px;
        min-width: 200px;
        padding: 0.5rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        z-index: 100;
      }

      .dropdown:hover .dropdown-menu {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(5px);
      }

      .dropdown-menu a {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        color: #c9d1d9;
        font-size: 0.85rem;
        border-radius: 8px;
        transition: all 0.2s;
      }

      .dropdown-menu a:hover {
        background: linear-gradient(90deg, rgba(88, 166, 255, 0.15) 0%, transparent 100%);
        color: #58a6ff;
        text-decoration: none;
        transform: translateX(5px);
      }

      .dropdown-menu a i {
        margin-right: 8px;
        font-size: 1.1rem;
      }

      .dropdown-trigger::after {
        content: '‚ñæ';
        font-size: 0.8rem;
        transition: transform 0.2s;
      }

      .dropdown:hover .dropdown-trigger::after {
        transform: rotate(180deg);
      }
      
      /* Mobile navigation */
      .mobile-nav {
        display: none;
        position: fixed;
        top: 0;
        right: -100%;
        width: 280px;
        height: 100vh;
        background-color: #161b22;
        border-left: 1px solid #30363d;
        padding: 1rem;
        z-index: 1000;
        transition: right 0.3s ease;
        overflow-y: auto;
      }
      
      .mobile-nav.active {
        right: 0;
      }
      
      .mobile-nav-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #30363d;
      }
      
      .mobile-nav-header h2 {
        color: #c9d1d9;
        font-size: 1.25rem;
        margin: 0;
      }
      
      .close-btn {
        background: none;
        border: none;
        color: #c9d1d9;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .mobile-nav a {
        display: block;
        color: #58a6ff;
        text-decoration: none;
        padding: 0.875rem 0;
        font-size: 1rem;
        border-bottom: 1px solid #21262d;
        transition: color 0.2s;
      }
      
      .mobile-nav a:hover {
        color: #79c0ff;
      }
      
      /* Overlay */
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }
      
      .overlay.active {
        opacity: 1;
        pointer-events: auto;
      }
      
      /* Main content */
      main {
        flex: 1 0 auto; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç—É —Ä–∞—Å—Ç–∏ –∏ —Ç–æ–ª–∫–∞—Ç—å —Ñ—É—Ç–µ—Ä */
        padding: 1rem;
        max-width: 1440px;
        width: 100%;
        margin: 0 auto;
        box-sizing: border-box;
      }

      main.wide {
        max-width: 1920px;
      }
      
      /* 2K / 4K Upscaling & Layout adjustments */
      @media (min-width: 1921px) {
        html {
          font-size: 125%; /* –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ –¥–ª—è 2K */
        }
        main {
          max-width: 1800px;
          padding: 2rem;
        }
        main.wide {
          max-width: 2560px;
        }
      }

      @media (min-width: 3840px) {
        html {
          font-size: 150%; /* –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ –¥–ª—è 4K */
        }
        main {
          max-width: 2800px;
        }
        main.wide {
          max-width: 3600px;
        }
      }

      /* Footer */
      footer {
        flex-shrink: 0; /* –§—É—Ç–µ—Ä –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
        margin-top: 4rem;
        padding: 3rem 1rem;
        background-color: rgba(22, 27, 34, 0.8);
        backdrop-filter: blur(8px);
        border-top: 1px solid rgba(48, 54, 61, 0.5);
        text-align: center;
        color: #7d8590;
        font-size: 0.9rem;
      }
      
      /* Mobile styles */
      @media (max-width: 767px) {
        .menu-toggle {
          display: flex;
        }
        
        header nav {
          display: none;
        }
        
        .mobile-nav {
          display: block;
        }
        
        .overlay {
          display: block;
        }
        
        main {
          padding: 1rem 0.75rem;
        }
        
        main.wide {
          width: calc(100vw - 1.5rem);
        }
        
        footer {
          padding: 1rem 0.75rem;
          font-size: 0.75rem;
        }
      }
      
      /* Tablet styles */
      @media (min-width: 768px) and (max-width: 1023px) {
        header {
          padding: 1rem 1.5rem;
        }
        
        header nav a {
          font-size: 0.85rem;
        }
        
        main {
          padding: 1.5rem;
        }
      }
      
      /* Desktop styles */
      @media (min-width: 1024px) {
        header {
          padding: 1rem 2rem;
        }
        
        main {
          padding: 2rem;
        }
      }
    </style>
  </head>
  <SpeedInsights/>
  <Analytics />
  <body>
    <header>
      <div class="logo">
        {!isHome && (
          <a href="javascript:history.back()" class="global-back-button" title="–ù–∞–∑–∞–¥">
            <span style="font-size: 1.2rem; line-height: 1;">‚Üê</span>
          </a>
        )}
        <a href="/">Archivist-Library</a>
      </div>
      <nav>
        <a href="/mutants">–ú—É—Ç–∞–Ω—Ç—ã</a>
        <div class="dropdown">
          <button class="dropdown-trigger">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</button>
          <div class="dropdown-menu">
            <a href="/evolution/evotech-calculator">
              <span>üß¨ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–≤–æ</span>
            </a>
            <a href="/simulators/stats">
              <span>üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–∞—Ç–æ–≤</span>
            </a>
          </div>
        </div>
        <a href="/materials">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a>
        <a href="/simulators">–°–∏–º—É–ª—è—Ç–æ—Ä—ã</a>
        <a href="/simulators/breeding">–°–∫—Ä–µ—â–∏–≤–∞–Ω–∏—è</a>
        <a href="/bingo">–ë–∏–Ω–≥–æ</a>
        <a href="/credits">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏</a>
        <a href="/top-evo">–¢–æ–ø –ø–æ —ç–≤–æ</a>
      </nav>
      <button class="menu-toggle" id="menuToggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </header>
    
    <!-- Mobile Navigation -->
    <div class="overlay" id="overlay"></div>
    <nav class="mobile-nav" id="mobileNav">
      <div class="mobile-nav-header">
        <h2>–ú–µ–Ω—é</h2>
        <button class="close-btn" id="closeBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–µ–Ω—é">&times;</button>
      </div>
      <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="/mutants">–ú—É—Ç–∞–Ω—Ç—ã</a>
      <a href="/simulators/stats">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–∞—Ç–æ–≤</a>
      <a href="/evolution/evotech-calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —ç–≤–æ</a>
      <a href="/materials">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a>
      <a href="/simulators">–°–∏–º—É–ª—è—Ç–æ—Ä—ã</a>
      <a href="/simulators/breeding">–°–∫—Ä–µ—â–∏–≤–∞–Ω–∏—è</a>
      <a href="/bingo">–ë–∏–Ω–≥–æ</a>
      <a href="/credits">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏</a>
      <a href="/top-evo">–¢–æ–ø –ø–æ —ç–≤–æ</a>
    </nav>
    
    <main class={fullWidth ? 'wide' : ''}>
      <slot />
    </main>
    <footer>
      <p>&copy; {new Date().getFullYear()} Archivist-Library ‚Äî –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –∏–≥—Ä–µ –∏ —Å–∏–º—É–ª—è—Ç–æ—Ä—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —à–∞–Ω—Å–∞–º–∏.</p>
    </footer>
    
    <script>
      // Mobile menu toggle
      const menuToggle = document.getElementById('menuToggle');
      const mobileNav = document.getElementById('mobileNav');
      const overlay = document.getElementById('overlay');
      const closeBtn = document.getElementById('closeBtn');
      
      function openMenu() {
        menuToggle?.classList.add('active');
        mobileNav?.classList.add('active');
        overlay?.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
      
      function closeMenu() {
        menuToggle?.classList.remove('active');
        mobileNav?.classList.remove('active');
        overlay?.classList.remove('active');
        document.body.style.overflow = '';
      }
      
      menuToggle?.addEventListener('click', () => {
        if (mobileNav?.classList.contains('active')) {
          closeMenu();
        } else {
          openMenu();
        }
      });
      
      closeBtn?.addEventListener('click', closeMenu);
      overlay?.addEventListener('click', closeMenu);
      
      // Close menu when clicking on a link
      const mobileNavLinks = mobileNav?.querySelectorAll('a');
      mobileNavLinks?.forEach(link => {
        link.addEventListener('click', closeMenu);
      });
    </script>
  </body>
</html>
